{
  "openapi": "3.1.0",
  "info": {
    "title": "Tofu-Maker API",
    "description": "RESTful Services to interact with opentofu CLI",
    "version": "1.0.14-SNAPSHOT"
  },
  "servers": [
    {
      "url": "http://localhost:9092",
      "description": "Generated server url"
    }
  ],
  "security": [
    {
      "OAuth2Flow": [
        "openid"
      ]
    }
  ],
  "tags": [
    {
      "name": "OpenTofuFromGitRepo",
      "description": "APIs for running OpenTofu commands using OpenTofu scripts from a GIT Repo."
    },
    {
      "name": "Admin",
      "description": "Admin services for managing the application."
    },
    {
      "name": "RetrieveOpenTofuResult",
      "description": "APIs to manually fetching task results from tofu-maker."
    },
    {
      "name": "OpenTofuFromScripts",
      "description": "APIs for running OpenTofu commands on the scripts sent via request body."
    },
    {
      "name": "OpenTofuFromDirectory",
      "description": "APIs for running OpenTofu commands inside a provided directory."
    }
  ],
  "paths": {
    "/tofu-maker/task/results/batch": {
      "post": {
        "tags": [
          "RetrieveOpenTofuResult"
        ],
        "description": "Method to batch retrieve stored opentofu result from tofu-maker.",
        "operationId": "getBatchTaskResults",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "description": "List of request IDs",
                "items": {
                  "type": "string",
                  "format": "uuid"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReFetchResult"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/validate": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Deploy resources via OpenTofu",
        "operationId": "validateWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuValidationResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/plan": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Get OpenTofu Plan as JSON string from the list of script files provided",
        "operationId": "planWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuPlan"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/modify": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Modify resources via OpenTofu",
        "operationId": "modifyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/modify/async": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "async modify resources via OpenTofu",
        "operationId": "asyncModifyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/destroy": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Destroy resources via OpenTofu",
        "operationId": "destroyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/deploy": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Deploy resources via OpenTofu",
        "operationId": "deployWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/deploy/async": {
      "post": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "async deploy resources via OpenTofu",
        "operationId": "asyncDeployWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/validate": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Deploy resources via OpenTofu",
        "operationId": "validateScriptsFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuValidationResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/plan": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Get OpenTofu Plan as JSON string from the list of script files provided",
        "operationId": "planFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuPlan"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/modify": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Modify resources via OpenTofu",
        "operationId": "modifyFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/modify/async": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "async deploy resources via OpenTofu",
        "operationId": "asyncModifyFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/destroy": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Destroy resources via OpenTofu",
        "operationId": "destroyFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/deploy": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Deploy resources via OpenTofu",
        "operationId": "deployFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/deploy/async": {
      "post": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "async deploy resources via OpenTofu",
        "operationId": "asyncDeployFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/validate": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "Validate the OpenTofu modules in the given directory.",
        "operationId": "validateFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuValidationResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/plan": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "Get OpenTofu Plan as JSON string from the given directory.",
        "operationId": "plan",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuPlan"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/modify": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "Modify resources via OpenTofu from the given directory.",
        "operationId": "modifyFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/modify/async": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "async modify resources via OpenTofu from the given directory.",
        "operationId": "asyncModifyFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/deploy": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "Deploy resources via OpenTofu from the given directory.",
        "operationId": "deployFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/deploy/async": {
      "post": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "async deploy resources via OpenTofu from the given directory.",
        "operationId": "asyncDeployFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/task/result/{requestId}": {
      "get": {
        "tags": [
          "RetrieveOpenTofuResult"
        ],
        "description": "Method to retrieve stored opentofu result in case tofu-maker receives a failure while sending the opentofu result via callback.",
        "operationId": "getStoredTaskResultByRequestId",
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "id of the request",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReFetchResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/health": {
      "get": {
        "tags": [
          "Admin"
        ],
        "description": "Check health of Tofu Maker API service",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TofuMakerSystemStatus"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/scripts/destroy/async": {
      "delete": {
        "tags": [
          "OpenTofuFromScripts"
        ],
        "description": "Async destroy the OpenTofu modules",
        "operationId": "asyncDestroyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScripts"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/git/destroy/async": {
      "delete": {
        "tags": [
          "OpenTofuFromGitRepo"
        ],
        "description": "Async destroy the OpenTofu modules",
        "operationId": "asyncDestroyFromGitRepo",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsGitRepo"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/destroy": {
      "delete": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "Destroy the resources from the given directory.",
        "operationId": "destroyFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenTofuResult"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    },
    "/tofu-maker/directory/destroy/async": {
      "delete": {
        "tags": [
          "OpenTofuFromDirectory"
        ],
        "description": "async destroy resources via OpenTofu from the given directory.",
        "operationId": "asyncDestroyFromDirectory",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenTofuAsyncRequestWithScriptsDirectory"
              }
            }
          },
          "required": true
        },
        "responses": {
          "202": {
            "description": "Accepted"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Response": {
        "type": "object",
        "properties": {
          "resultType": {
            "type": "string",
            "description": "The result code of response.",
            "enum": [
              "Parameters Invalid",
              "Unprocessable Entity",
              "OpenTofu Execution Failed",
              "Unsupported Enum Value",
              "Service Unavailable",
              "Unauthorized",
              "Invalid Git Repo Details",
              "Invalid OpenTofu Tool",
              "Invalid OpenTofu Scripts",
              "Invalid OpenTofu Request",
              "Send Amqp Message Failed",
              "Result Already Returned or RequestId Invalid"
            ]
          },
          "details": {
            "type": "array",
            "description": "Details of the errors occurred",
            "items": {
              "type": "string"
            }
          },
          "success": {
            "type": "boolean",
            "description": "Describes if the request is successful"
          }
        },
        "required": [
          "details",
          "resultType",
          "success"
        ]
      },
      "OpenTofuResult": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "commandStdOutput": {
            "type": "string",
            "description": "stdout of the command returned as string."
          },
          "commandStdError": {
            "type": "string",
            "description": "stderr of the command returned as string."
          },
          "terraformState": {
            "type": "string",
            "description": ".tfstate file contents returned as string."
          },
          "generatedFileContentMap": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Data of all other files generated by the openTofu execution.The map key contains the file name and value is the file contents as string."
          },
          "openTofuVersionUsed": {
            "type": "string",
            "description": "The version of the OpenTofu binary used to execute scripts."
          },
          "commandSuccessful": {
            "type": "boolean"
          }
        },
        "required": [
          "requestId"
        ]
      },
      "ReFetchResult": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request order."
          },
          "state": {
            "type": "string",
            "description": "State of the re-fetching result of order.",
            "enum": [
              "OK",
              "OrderInProgress",
              "ResultNotFound",
              "ResultParseFailed"
            ]
          },
          "openTofuResult": {
            "$ref": "#/components/schemas/OpenTofuResult",
            "description": "Result of the service order executed by open tofu."
          },
          "errorMessage": {
            "type": "string",
            "description": "Error message of the re-fetching result of order."
          }
        },
        "required": [
          "requestId",
          "state"
        ]
      },
      "OpenTofuRequestWithScripts": {
        "type": "object",
        "description": "OpenTofu request with scripts files",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "scriptFiles": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Map stores file name and content of all script files for deploy request."
          }
        },
        "required": [
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "scriptFiles",
          "variables"
        ]
      },
      "OpenTofuValidateDiagnostics": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "string",
            "description": "Detail of validation error."
          }
        }
      },
      "OpenTofuValidationResult": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the request."
          },
          "valid": {
            "type": "boolean",
            "description": "Defines if the scripts is valid."
          },
          "openTofuVersionUsed": {
            "type": "string",
            "description": "The version of the OpenTofu binary used to execute scripts."
          },
          "diagnostics": {
            "type": "array",
            "description": "List of validation errors.",
            "items": {
              "$ref": "#/components/schemas/OpenTofuValidateDiagnostics"
            }
          }
        },
        "required": [
          "requestId",
          "valid"
        ]
      },
      "OpenTofuPlan": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the request"
          },
          "plan": {
            "type": "string",
            "description": "OpenTofu plan as a JSON string"
          },
          "openTofuVersionUsed": {
            "type": "string",
            "description": "The version of the OpenTofu binary used to execute scripts."
          },
          "errorMessage": {
            "type": "string",
            "description": "The error message of executing tofu plan command."
          }
        },
        "required": [
          "plan",
          "requestId"
        ]
      },
      "OpenTofuAsyncRequestWithScripts": {
        "type": "object",
        "description": "OpenTofu async request with scripts files",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "scriptFiles": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Map stores file name and content of all script files for deploy request."
          },
          "webhookConfig": {
            "$ref": "#/components/schemas/WebhookConfig",
            "description": "Configuration information of webhook."
          }
        },
        "required": [
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "scriptFiles",
          "variables",
          "webhookConfig"
        ]
      },
      "WebhookConfig": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "Callback address after deployment/destroy is completed."
          },
          "authType": {
            "type": "string",
            "description": "The permission type when calling back.",
            "enum": [
              "none",
              "oauth",
              "hmac"
            ]
          }
        },
        "required": [
          "authType",
          "url"
        ]
      },
      "OpenTofuRequestWithScriptsGitRepo": {
        "type": "object",
        "description": "OpenTofu request with scripts git repo",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "gitRepoDetails": {
            "$ref": "#/components/schemas/OpenTofuScriptsGitRepoDetails",
            "description": "GIT Repo details from where the scripts can be fetched."
          }
        },
        "required": [
          "gitRepoDetails",
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "variables"
        ]
      },
      "OpenTofuScriptsGitRepoDetails": {
        "type": "object",
        "properties": {
          "repoUrl": {
            "type": "string",
            "description": "url of the GIT repo. This repo will be cloned."
          },
          "branch": {
            "type": "string",
            "description": "Branch to be checked-out after the repo is cloned."
          },
          "scriptPath": {
            "type": "string",
            "description": "Location of the scripts. If not provided, the scripts will be executed from root folder of the repo."
          }
        },
        "required": [
          "branch",
          "repoUrl"
        ]
      },
      "OpenTofuAsyncRequestWithScriptsGitRepo": {
        "type": "object",
        "description": "OpenTofu async request with scripts git repo",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "gitRepoDetails": {
            "$ref": "#/components/schemas/OpenTofuScriptsGitRepoDetails",
            "description": "GIT Repo details from where the scripts can be fetched."
          },
          "webhookConfig": {
            "$ref": "#/components/schemas/WebhookConfig",
            "description": "Configuration information of webhook."
          }
        },
        "required": [
          "gitRepoDetails",
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "variables",
          "webhookConfig"
        ]
      },
      "OpenTofuRequestWithScriptsDirectory": {
        "type": "object",
        "description": "OpenTofu request with directory where scripts files exist",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "scriptsDirectory": {
            "type": "string",
            "description": "Directory where the OpenTofu scripts files exist."
          }
        },
        "required": [
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "scriptsDirectory",
          "variables"
        ]
      },
      "OpenTofuAsyncRequestWithScriptsDirectory": {
        "type": "object",
        "description": "OpenTofu async request with directory where scripts files exist",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Id of the request."
          },
          "requestType": {
            "type": "string",
            "description": "Type of the openTofu request.",
            "enum": [
              "validate",
              "plan",
              "deploy",
              "modify",
              "destroy"
            ]
          },
          "openTofuVersion": {
            "type": "string",
            "description": "The required version of openTofu which will execute the scripts.",
            "pattern": "^(=|>=|<=)\\s*[vV]?\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$"
          },
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the openTofu or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object"
            },
            "description": "Key-value pairs of variables that must be used to execute the OpenTofu request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to openTofu process."
          },
          "tfState": {
            "type": "string",
            "description": "OpenTofu state as a string."
          },
          "scriptsDirectory": {
            "type": "string",
            "description": "Directory where the OpenTofu scripts files exist."
          },
          "webhookConfig": {
            "$ref": "#/components/schemas/WebhookConfig",
            "description": "Configuration information of webhook."
          }
        },
        "required": [
          "isPlanOnly",
          "openTofuVersion",
          "requestId",
          "requestType",
          "scriptsDirectory",
          "variables",
          "webhookConfig"
        ]
      },
      "TofuMakerSystemStatus": {
        "type": "object",
        "properties": {
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "ID of the request."
          },
          "healthStatus": {
            "type": "string",
            "description": "The health status of api service.",
            "enum": [
              "OK",
              "NOK"
            ]
          },
          "serviceType": {
            "type": "string",
            "description": "The service type of tofu-maker."
          },
          "serviceUrl": {
            "type": "string",
            "description": "The url of tofu-maker service."
          },
          "errorMessage": {
            "type": "string",
            "description": "The error message of tofu-maker service."
          }
        },
        "required": [
          "healthStatus",
          "requestId",
          "serviceType",
          "serviceUrl"
        ]
      }
    },
    "securitySchemes": {
      "OAuth2Flow": {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "http://localhost:8088/oauth/v2/authorize",
            "tokenUrl": "http://localhost:8088/oauth/v2/token",
            "scopes": {
              "openid": "mandatory must be selected."
            }
          }
        }
      }
    }
  }
}